This directory contains a few C/C++ sample applications in Linux for demoing onnxruntime usage:

1. (Windows and Linux) fns_candy_style_transfer: A C application that uses the FNS-Candy style transfer model to re-style images. It is written purely in C, no C++.
2. (Linux) fns_candy_style_transfer_cxx: A C application that uses the FNS-Candy style transfer model to re-style images. It is written in C++.
3. (Linux) MNIST_cxx: A windows GUI application for doing handwriting recognition. It's not as writable as the original [MNIST](https://github.com/microsoft/onnxruntime-inference-examples/tree/main/c_cxx/MNIST), but you can use the [test images](https://github.com/wangkaisine/onnxruntime-inference-examples-cxx-for-linux/tree/main/resources/MNIST/test_images) from resources, or build more of your own, in 28x28 grayscale format.

# How to build

## Prerequisites
1. Linux Ubuntu/Centos
2. cmake(version >=3.13)
3. (optional) [libpng 1.6](http://www.libpng.org/pub/png/libpng.html)

You may get a precompiled libpng library from [https://onnxruntimetestdata.blob.core.windows.net/models/libpng.zip](https://onnxruntimetestdata.blob.core.windows.net/models/libpng.zip)

## Install ONNX Runtime
### Download a prebuilt package
You may either get a prebuit onnxruntime from https://github.com/microsoft/onnxruntime/releases/. For example, you may download onnxruntime-win-x64-\*\*\*.zip and unzip it to any folder. 

## Build the samples

Open Developer Command Prompt for Visual Studio version you are going to use, change your current directory to samples\c_cxx, then run
```shell
mkdir build && cd build
cmake .. -DLIBPNG_ROOTDIR=\path\to\your\libpng\binary -DONNXRUNTIME_ROOTDIR=\path\to\your\ort_install
```
You may omit the "-DLIBPNG_ROOTDIR=..." argument if you don't have the libpng library.
You may omit "-DONNXRUNTIME_ROOTDIR=..." if you installed to a default location.

You may append "-Donnxruntime_USE_CUDA=ON" or "-Donnxruntime_USE_DML=ON" to the last command args if your onnxruntime binary was built with CUDA or DirectML support respectively.

Using the Makefile generated by cmake, type make to compile the C++ code.
```shell
make
```

The executable files can be found in the project folder in the build directory.
